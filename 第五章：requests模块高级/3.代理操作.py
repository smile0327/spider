#需求：
import requests
url = 'https://www.baidu.com/s?wd=ip'

headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36',
    'Cookie': 'BIDUPSID=41AAAF75E51F71E2415C9A5E5115402C; PSTM=1651897285; BAIDUID=41AAAF75E51F71E28CF6DA47ACC41389:FG=1; BD_UPN=12314753; MAWEBCUID=web_jYuimdXNOtSihJQhhMQVTCnwtuLgQSzSrHIsvLLHjzYHXUsThP; BDUSS=ZjbFhMMHc4Zm9XU0FwcFNKejN2bGk2dGRyQi1lcmg0UEVWTnBlWkp0N3Z3WDVqSVFBQUFBJCQAAAAAAAAAAAEAAACo~Bk3c21pbGVfeGlhb3lvbmcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO80V2PvNFdjUn; BDUSS_BFESS=ZjbFhMMHc4Zm9XU0FwcFNKejN2bGk2dGRyQi1lcmg0UEVWTnBlWkp0N3Z3WDVqSVFBQUFBJCQAAAAAAAAAAAEAAACo~Bk3c21pbGVfeGlhb3lvbmcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO80V2PvNFdjUn; MCITY=-218:; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; delPer=0; PSINO=6; BA_HECTOR=808k81a18la521ah8k20a9ai1hotp0t1h; BAIDUID_BFESS=41AAAF75E51F71E28CF6DA47ACC41389:FG=1; ZFY=kSOynomfYqywjeKxwtH7d1kR0tTBB5YT7Ikl:BHvcj14:C; COOKIE_SESSION=717_0_9_9_37_5_0_0_9_1_0_2_875_0_250_0_1670309137_0_1670308887|9#0_0_1670308887|1; B64_BOT=1; BD_HOME=1; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; BD_CK_SAM=1; ab_sr=1.0.1_Yjg4ZmQwYzhlMGMyZGI2OGY0NTZkOTFiMjY0MTVlZjdhODhhNWFiODljMzBkNDM4OWE0OGU3YTljYzZkYWU2M2M1MzU1NTQ3NDI2Njc1NzA5YjE1MzMzMWI3NGQxYzI4NGFkYzJiMGI1YWJhOWYwZWM4YTYzZjE2NjRkZmIzNDUxZmJkMjY0ZDlkMzgxMzc0MGUxYTZlZDdjOWFkNmYwMg==; H_PS_PSSID=36545_37554_37514_37831_37840_37766_37883_37797_37761_26350_37789_37881; H_PS_645EC=9617pR3qqLQzSse3svoSC7/ntaf1DIUTwqfTKdFF01JMPvxz4q29iiKPMp54ZvVo0l6z; BDSVRTM=269; baikeVisitId=84daa0f1-d0bd-4d20-a5b7-97b13c530606; WWW_ST=1670315010336'
}

if __name__ == '__main__':
    # 代理ip参数
    proxy = '118.31.2.38:8999'
    page_text = requests.get(url=url,headers=headers,proxies={"https": 'https://' + proxy}).content.decode('utf-8')
    with open('ip.html', 'w', encoding='utf-8') as fp:
        fp.write(page_text)

#反爬机制：  封ip
#反反爬策略：使用代理进行请求发送